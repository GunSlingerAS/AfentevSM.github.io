<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Личный кабинет - Настройки</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap");
      @font-face {
        font-family: "Actay Wide";
        src: url("fonts/ActayWide-Bold.woff2") format("woff2"),
          url("fonts/ActayWide-Bold.woff") format("woff");
        font-weight: 700;
        font-style: normal;
      }
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Montserrat", sans-serif;
}

body {
  background-color: #fafaff;
  color: #333;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/*Стили текста*/
.button-style--small {
  font-family: "Montserrat", sans-serif;
  font-size: 18px !important;
  font-weight: 300;
  font-style: normal;
  line-height: 1.2;
}

.button-style--big {
  font-size: 20px;
}

h1 {
  font-family: "Montserrat", sans-serif;
  font-size: 48px;
  font-weight: 700;
  font-style: normal;
  margin: 0;
  line-height: 1;
  margin-bottom: 40px;
}

h2 {
  font-family: "Montserrat", sans-serif;
  font-size: 32px;
  font-weight: 700;
  font-style: normal;
  margin: 0;
  line-height: 1;
  margin-bottom: 40px;
}

h3 {
  font-family: "Montserrat", sans-serif;
  font-size: 24px;
  font-weight: 700;
  font-style: normal;
  margin: 0;
  line-height: 1.3;
}

h4 {
  font-family: "Montserrat", sans-serif;
  font-size: 20px;
  font-weight: 700;
  font-style: normal;
  margin: 0;
  line-height: 1.3;
}

.standart {
  font-family: "Montserrat", sans-serif;
  font-size: 18px !important;
  font-weight: 300;
  font-style: normal;
  line-height: 1.2;
}

.nav-link {
  color: white !important;
  text-decoration: none !important;
  display: inline-block;
}

.nav-link:hover {
  opacity: 0.8;
}

header {
  height: 75px;
  width: 100%;
  background-color: #0d0a0b;
  position: sticky;
  top: 0;
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
}

.padding-header {
  width: 1280px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  padding-left: 120px;
  padding-right: 120px;
  height: 100%;
}

.logo-container {
  width: 60px;
  height: 60px;
}

.logo-icon {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.header-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-direction: row;
  width: 561px;
  height: 32px;
}

.text-block-1 {
  height: auto;
  width: auto;
  color: #fafaff;
}

.small-button {
  min-height: 41px;
  min-width: 155px;
  padding-left: 20px;
  padding-right: 20px;
  background-color: #264c12;
  color: #fafaff;
  border: none;
  border-radius: 40px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.small-button:hover {
  background-color: #152a0a;
}

.small-button:active {
  border: 2px solid #264c12;
  padding-left: 18px;
  padding-right: 18px;
  color: #264c12;
  background-color: transparent;
  transform: scale(0.98);
}

.tiny-button {
  height: 30px;
  width: 148px;
  border-radius: 40px;
  background-color: #264c12;
  color: #fafaff;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s;
}

.tiny-button:hover {
  background-color: #152a0a;
}

.tiny-button:active {
  border: 2px solid #264c12;
  padding-left: 18px;
  padding-right: 18px;
  color: #264c12;
  background-color: transparent;
  transform: scale(0.98);
}

.small-icon-container {
  height: 41px;
  width: 41px;
  margin-left: 114px;
  border: none;
  background-color: transparent;
}

.small-icon {
  width: 100%;
  height: 100%;
  border-radius: 100%;
  object-fit: cover;
  object-position: center;
}

/*тело сайта*/

.padding {
  width: 846px;
  height: auto;
  display: flex;
  flex-direction: column;
  align-self: center;
  justify-self: center;
  margin-bottom: 60px;
}

.profile-container {
  width: 100%;
  height: 134px;
  border-radius: 20px;
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 30px;
  color: #0d0a0b;
  background-color: #8bba49;
}

.profile-icon-container {
  height: 110px;
  width: 110px;
}

.profile-icon {
  height: 100%;
  width: 100%;
  object-fit: cover;
  border-radius: 100%;
}

.profile-info-container {
  height: 81px;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: start;
  margin-left: 20px;
}

.username {
  min-height: 47px;
  width: auto;
  margin-top: auto;
  justify-self: end;
  display: flex;
  flex-direction: column;
}

.name {
  height: 18px;
  margin-bottom: 15px;
}

/*Тело сайта*/

.body {
  width: 100%;
  height: auto;
  display: flex;
  flex-direction: row;
  margin-bottom: 20px;
}

/*Поля информации*/

.field-container-1 {
  width: 100%;
  height: auto;
  margin-bottom: 40px;
}

.field-container-2 {
  width: 100%;
  height: auto;
}

.topic {
  height: 26px;
  width: auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-bottom: 25px;
  color: #0d0a0b;
}

.info-container {
  width: 421px;
  min-height: 100px;
  display: flex;
  flex-direction: column;
  margin-right: 60px;
  color: #0d0a0b;
}

.field {
  width: 100%;
  height: 41px;
  display: flex;
  flex-direction: row;
  align-items: center;
  padding-left: 20px;
  box-shadow: inset 0 0 0 2px #454955;
  border-radius: 21px;
  margin-bottom: 10px;
  color: #454955;
}

.tiny-text {
  font-family: "Montserrat";
  font-size: 13px;
  font-weight: 300;
  font-style: normal;
  line-height: 1.2;
}

.link-button {
  border: none;
  background-color: transparent;
  color: #fafaff;
}

.link-button-2 {
  text-align: end;
  border: none;
  background-color: transparent;
  color: #fafaff;
}

/*настройка изображений*/

.pictures {
  width: 353px;
  min-height: 100px;
  display: flex;
  flex-direction: column;
  color: #0d0a0b;
}

.picture-adj {
  width: 353px;
  height: 195px;
  border-radius: 20px;
  background-color: #c7c5cd;
  display: flex;
  flex-direction: column;
  padding: 20px;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 25px;
  padding-top: 13px;
}

.photo-container {
  width: 100%;
  height: 110px;
  border-radius: 20px;
}

.photo {
  height: 100%;
  width: 100%;
  object-fit: cover;
  border-radius: 20px;
}

/*Кнопка сохранить*/

.button-container {
  width: 100%;
  height: auto;
  display: flex;
  flex-direction: row;
  justify-content: end;
}

/* Подвал сайта */
footer {
  height: auto;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background-color: #0d0a0b;
  margin-top: auto;
}

.footer-container {
  width: 1280px;
  color: #fafaff;
  padding: 36px 116px 0;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 30px;
}

.footer-content {
  width: 80%;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.footer-section {
  min-width: 100px;
}

.title-h4 {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.footer-section ul {
  margin-top: 15px;
  list-style: none;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.footer-section li {
  margin-bottom: 12px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.footer-section a {
  color: #ccc;
  text-decoration: none;
  transition: color 0.3s;
}

.footer-section a:hover {
  color: white;
}

.social-icons {
  display: flex;
  justify-content: end;
  gap: 15px;
  margin-top: 20px;
}

.social-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: transparent;
  border: none;
}

.iconBtn {
  border: none;
  background-color: transparent;
}

.social-image-1 {
  width: 100%;
  height: 100%;
  object-fit: fill;
  object-position: center;
}

.social-image-2 {
  width: 100%;
  height: 100%;
  object-fit: fill;
  object-position: center;
}

.social-image-3 {
  width: 75%;
  height: 75%;
  object-fit: fill;
  object-position: center;
}

.social-image-4 {
  width: 90%;
  height: 90%;
  object-fit: fill;
  object-position: center;
}

.contact-info {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.contact-info a {
  text-decoration: none;
  color: #8bba49;
}

.copyright {
  width: 100%;
  background-color: #0d0a0b;
  text-align: center;
  padding: 20px 0;
  border-top: 1px solid #fafaff;
  color: #fafaff;
  font-size: 14px;
  margin-top: 0;
}

/* Модальные окна */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 1000;
  justify-content: center;
  align-items: center;
}

.modal-content {
  background-color: #fafaff;
  padding: 30px;
  border-radius: 20px;
  width: 500px;
  max-width: 90%;
  box-shadow: 0 0 0 2px #0d0a0b;
  position: relative;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.modal-close {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: #0d0a0b;
}

/* Превью изображений */
.preview-container {
  position: relative;
  margin: 20px 0;
  overflow: hidden;
}

/* Для аватарки */
.avatar-preview {
  width: 300px;
  height: 300px;
  margin: 0 auto;
  border-radius: 50%;
  overflow: hidden;
  position: relative;
  border: 2px dashed #8bba49;
  background-color: #f0f0f0;
}

.avatar-preview img {
  position: absolute;
  max-width: none;
  max-height: none;
  transform-origin: center center;
}

.crop-circle {
  position: absolute;
  width: 200px;
  height: 200px;
  border: 2px solid white;
  border-radius: 50%;
  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
  top: 50px;
  left: 50px;
  cursor: move;
  z-index: 10;
}

/* Для шапки профиля */
.banner-preview {
  width: 530px;
  height: 150px;
  margin: 0 auto;
  overflow: hidden;
  position: relative;
  border: 2px dashed #8bba49;
  background-color: #f0f0f0;
}

.banner-preview img {
  position: absolute;
  max-width: none;
  max-height: none;
  transform-origin: center center;
}

.crop-rect {
  position: absolute;
  width: 530px;
  height: 150px;
  border: 2px solid white;
  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
  cursor: move;
  z-index: 10;
}

/* Drag & Drop зона */
.drop-zone {
  border: 2px dashed #8bba49;
  border-radius: 5px;
  padding: 25px;
  text-align: center;
  margin: 10px 0;
  transition: all 0.3s;
  cursor: pointer;
  background-color: rgba(139, 186, 73, 0.1);
}

.drop-zone.active {
  background-color: rgba(139, 186, 73, 0.2);
  border-color: #264c12;
}

.drop-zone p {
  margin: 0;
  color: #0d0a0b;
  font-size: 14px;
}

/* Элементы управления */
.controls {
  display: flex;
  justify-content: space-between;
  margin-top: 15px;
}

.zoom-controls {
  display: flex;
  gap: 10px;
}

.zoom-btn {
  width: 30px;
  height: 30px;
  background: #8bba49;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.upload-options {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.upload-btn {
  width: 200px;
  padding: 10px 20px;
  background-color: #8bba49;
  color: #fafaff;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s;
  font-family: "Montserrat";
  font-size: 14px;
  margin-top: 20px;
  display: flex;
  justify-content: center;
}

.upload-btn:hover {
  background-color: #264c12;
}

.upload-btn:active {
  box-shadow: inset 0 0 0 2px #264c12;
  padding-left: 18px;
  padding-right: 18px;
  color: #264c12;
  background-color: transparent;
  transform: scale(0.98);
}

input[type="file"] {
  display: none;
}

/* Стили для полей ввода */
.field input {
  width: 100%;
  background: transparent;
  border: none;
  outline: none;
  color: #0d0a0b;
  font-family: "Montserrat";
  font-size: 13px;
  font-weight: 300;
}

.field input::placeholder {
  color: #454955;
}

    </style>
  </head>
  <body>
    <!-- Шапка сайта -->
    <header>
      <div class="padding-header">
        <div class="logo-container">
          <button class="link-button" id="logoLink">
            <img
              src="https://i.postimg.cc/qMpJBJCZ/icons8-gaming-hand-96.png"
              alt="Логотип Gaming Hand"
              class="logo-icon"
            />
          </button>
        </div>
        <div class="header-bar">
          <div class="text-block-1">
            <button class="link-button" id="headerCoursesBtn">
              <p class="button-style--small">Все курсы</p>
            </button>
          </div>
          <div class="text-block-1">
            <button class="link-button" id="studentsLink">
              <p class="button-style--small">Работы студентов</p>
            </button>
          </div>
          <div class="text-block-1">
            <button class="link-button" id="structureLink">
              <p class="button-style--small">Структура обучения</p>
            </button>
          </div>
        </div>
        <button class="small-icon-container" id="iconLink">
          <img
            src="https://i.postimg.cc/PrSF0zmq/image.jpg"
            alt="Иконка"
            class="small-icon"
          />
        </button>
      </div>
    </header>

    <!--Тело сайта-->
    <div class="padding">
      <div class="profile-container">
        <div class="profile-icon-container">
          <img
            id="profileIcon"
            src="https://i.postimg.cc/PrSF0zmq/image.jpg"
            alt="Иконка профиля"
            class="profile-icon"
          />
        </div>
        <div class="profile-info-container">
          <p class="standart">Настройки</p>
          <div class="username">
            <div class="name">
              <h2 id="profileName">Сергей Афентьев</h2>
            </div>
            <p class="standart" id="profileInfo">начинающий weapon artist</p>
          </div>
        </div>
      </div>

      <div class="body">
        <div class="info-container">
          <div class="field-container-1">
            <div class="topic">
              <h3>Телефон</h3>
            </div>
            <div class="field">
              <input
                type="text"
                id="phoneInput"
                placeholder="+7(xxx) xxx xx-xx"
                class="tiny-text"
              />
            </div>
          </div>

          <div class="field-container-1">
            <div class="topic">
              <h3>Discord</h3>
            </div>
            <div class="field">
              <input
                type="text"
                id="discordInput"
                placeholder="username_xxxxx"
                class="tiny-text"
              />
            </div>
          </div>

          <div class="field-container-2">
            <div class="topic">
              <h3>Контакты</h3>
            </div>
            <div class="field">
              <input
                type="text"
                id="lastNameInput"
                placeholder="Фамилия"
                class="tiny-text"
              />
            </div>
            <div class="field">
              <input
                type="text"
                id="firstNameInput"
                placeholder="Имя"
                class="tiny-text"
              />
            </div>
            <div class="field">
              <input
                type="text"
                id="infoInput"
                placeholder="Сведения"
                class="tiny-text"
              />
            </div>
            <div class="field">
              <input
                type="text"
                id="emailInput"
                placeholder="E-mail"
                class="tiny-text"
              />
            </div>
          </div>
        </div>

        <div class="pictures">
          <div class="topic">
            <h3>Иконка</h3>
          </div>
          <div class="picture-adj">
            <div class="profile-icon-container">
              <img
                id="avatarPreview"
                src="https://i.postimg.cc/PrSF0zmq/image.jpg"
                alt="Иконка"
                class="profile-icon"
              />
            </div>
            <button class="tiny-button" id="changeAvatarBtn">
              <p class="tiny-text">Загрузить фото</p>
            </button>
          </div>
          <div class="topic">
            <h3>Шапка профиля</h3>
          </div>
          <div class="picture-adj">
            <div class="photo-container">
              <img
                id="bannerPreview"
                src="https://i.postimg.cc/kXsyBJ4Y/image.jpg"
                alt="Шапка профиля"
                class="photo"
              />
            </div>
            <button class="tiny-button" id="changeBannerBtn">
              <p class="tiny-text">Загрузить фото</p>
            </button>
          </div>
        </div>
      </div>

      <!-- Кнопка сохранения -->
      <div class="button-container">
        <button class="small-button" id="saveProfileBtn">
          <p class="tiny-text">Сохранить изменения</p>
        </button>
      </div>
    </div>

    <!-- Модальные окна -->
    <div class="modal-overlay" id="avatarModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Загрузить новую иконку</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="upload-options">
          <label>
            <input type="file" id="avatarInput" accept="image/*" />
            <div class="upload-btn">Выбрать файл</div>
          </label>
          <button class="upload-btn" id="saveAvatarBtn">Сохранить</button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="bannerModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Загрузить новую шапку</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="upload-options">
          <label>
            <input type="file" id="bannerInput" accept="image/*" />
            <div class="upload-btn">Выбрать файл</div>
          </label>
          <button class="upload-btn" id="saveBannerBtn">Сохранить</button>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-container">
        <div class="footer-content">
          <div class="footer-section">
            <div class="title-h4">
              <h4>Направления</h4>
            </div>
            <ul>
              <li>
                <button class="link-button-2" id="propsLink">
                  <a>пропсы</a>
                </button>
              </li>
              <li>
                <button class="link-button-2" id="weaponLink">
                  <a>оружие</a>
                </button>
              </li>
            </ul>
          </div>
          <div class="footer-section">
            <div class="title-h4">
              <h4>Общие вопросы</h4>
            </div>
            <ul>
              <li>
                <button class="link-button-2" id="faq1Btn">
                  <a>Какие программы<br />используются в курсе?</a>
                </button>
              </li>
              <li>
                <button class="link-button-2" id="faq2Btn">
                  <a>Какой компьютер<br />нужен для обучения?</a>
                </button>
              </li>
              <li>
                <button class="link-button-2" id="faq5Btn">
                  <a>Есть ли помощь<br />в трудоустройстве?</a>
                </button>
              </li>
              <li>
                <button class="link-button-2" id="faq4Btn">
                  <a>Даётся ли сертификат<br />после обучения?</a>
                </button>
              </li>
            </ul>
          </div>
          <!-- Нижний блок - контакты -->
          <div class="footer-section">
            <div class="contact-info">
              <h4>+7 (922) 782-77-98</h4>
              <h4>
                <a href="mailto:afentievsergy@gmail.com"
                  >afentievsergy@gmail.com</a
                >
              </h4>
            </div>
            <div class="social-icons">
              <div class="social-icon">
                <button class="iconBtn" id="youtube">
                  <img
                    src="https://i.postimg.cc/LX9Jq6j8/16-A86m-Dd6co.png"
                    alt="Превью"
                    class="social-image-1"
                  />
                </button>
              </div>
              <div class="social-icon">
                <button class="iconBtn" id="VK">
                  <img
                    src="https://i.postimg.cc/v8S4ByTG/80d71d45e36bd90000f2428ae05832a5-1.png"
                    alt="Превью"
                    class="social-image-2"
                  />
                </button>
              </div>
              <div class="social-icon">
                <button class="iconBtn" id="artstation">
                  <img
                    src="https://i.postimg.cc/15k4GKDT/artstation.png"
                    alt="Превью"
                    class="social-image-3"
                  />
                </button>
              </div>
              <div class="social-icon">
                <button class="iconBtn" id="discord">
                  <img
                    src="https://i.postimg.cc/d1NVLRq5/pasted-from-clipboard.png"
                    alt="Превью"
                    class="social-image-4"
                  />
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Copyright ВНЕ footer-content, но ВНУТРИ footer-container -->
      <div class="copyright">&copy; 2025 Afentev. Все права защищены.</div>
    </footer>

    <script>
      // Функция для настройки кнопок
      function setupButton(buttonId, targetUrl) {
        const button = document.getElementById(buttonId);
        if (button) {
          button.addEventListener("click", function () {
            window.location.href = targetUrl;
          });
        }
      }

      setupButton("headerCoursesBtn", "Все курсы.html");
      setupButton("logoLink", "index.html");
      setupButton("studentsLink", "index.html#works");
      setupButton("structureLink", "index.html#structure");
      setupButton("iconLink", "Личный кабинет - Мои курсы.html");
      setupButton("tieBtn", "Личный кабинет - Настройки.html");
      setupButton("editBtn", "Личный кабинет - Настройки.html");
      setupButton("my-cources-btn", "Личный кабинет - Мои курсы.html");
      setupButton("streams-btn", "Личный кабинет - Стримы.html");
      setupButton("all-cources-btn", "Личный кабинет - Все курсы.html");
      setupButton("propsLink", "index.html#directions");
      setupButton("weaponLink", "index.html#directions");
      setupButton("youtube", "https://www.youtube.com/@Afentev");
      setupButton("VK", "https://vk.com/id488882472");
      setupButton("artstation", "https://www.artstation.com/afentev");
      setupButton("discord", "https://discord.gg/mV3UcUJd");

      // Обработчики для кнопок FAQ в подвале
      document.querySelectorAll('[id^="faq"]').forEach((btn) => {
        btn.addEventListener("click", function () {
          // Получаем номер вопроса из ID кнопки (например, "faq1Btn" → "1")
          const questionNum = this.id.match(/\d+/)[0];

          // Добавляем класс clicked для анимации
          this.classList.add("clicked");

          // Перенаправляем на страницу FAQ с соответствующим хэшем
          setTimeout(() => {
            window.location.href = "FAQ.html#q-" + questionNum;
          }, 300);
        });
      });

      // Проверяем hash URL при загрузке страницы
      if (window.location.hash) {
        const questionId = window.location.hash.substring(1);
        const questionElement = document.getElementById(questionId);
        if (questionElement) {
          const answer = questionElement.querySelector(".answer-container");
          const icon = questionElement.querySelector(".sort-icon");
          toggleAnswer(questionElement, answer, icon);
        }
      }

      const savedData = localStorage.getItem("profileData");
      if (savedData) {
        const profileData = JSON.parse(savedData);

        // Обновляем иконку профиля в шапке (если есть такой элемент)
        const headerProfileIcon = document.getElementById("headerProfileIcon");
        if (headerProfileIcon) {
          headerProfileIcon.src = profileData.avatar;
        }

        // Обновляем другие элементы, если они есть на странице
        const profileIcon = document.getElementById("profileIcon");
        if (profileIcon) {
          profileIcon.src = profileData.avatar;
        }

        const bannerPreview = document.getElementById("bannerPreview");
        if (bannerPreview) {
          bannerPreview.src = profileData.banner;
        }
      }

      // Данные профиля
      const profileData = {
        firstName: "Сергей",
        lastName: "Афентьев",
        info: "начинающий weapon artist",
        phone: "+7(xxx) xxx xx-xx",
        discord: "username_xxxxx",
        email: "",
        avatar: "https://i.postimg.cc/PrSF0zmq/image.jpg",
        banner: "https://i.postimg.cc/kXsyBJ4Y/image.jpg",
      };

      // Элементы DOM
      const profileName = document.getElementById("profileName");
      const profileInfo = document.getElementById("profileInfo");
      const profileIcon = document.getElementById("profileIcon");
      const headerProfileIcon = document.querySelector("#iconLink .small-icon"); // Исправленный селектор
      const avatarPreview = document.getElementById("avatarPreview");
      const bannerPreview = document.getElementById("bannerPreview");

      // Поля ввода
      const firstNameInput = document.getElementById("firstNameInput");
      const lastNameInput = document.getElementById("lastNameInput");
      const infoInput = document.getElementById("infoInput");
      const phoneInput = document.getElementById("phoneInput");
      const discordInput = document.getElementById("discordInput");
      const emailInput = document.getElementById("emailInput");

      // Кнопки
      const saveProfileBtn = document.getElementById("saveProfileBtn");
      const changeAvatarBtn = document.getElementById("changeAvatarBtn");
      const changeBannerBtn = document.getElementById("changeBannerBtn");

      // Модальные окна
      const avatarModal = document.getElementById("avatarModal");
      const bannerModal = document.getElementById("bannerModal");
      const avatarInput = document.getElementById("avatarInput");
      const bannerInput = document.getElementById("bannerInput");
      const saveAvatarBtn = document.getElementById("saveAvatarBtn");
      const saveBannerBtn = document.getElementById("saveBannerBtn");
      const closeButtons = document.querySelectorAll(".modal-close");

      // Инициализация полей
      function initFields() {
        // Получаем данные из localStorage
        const savedData = localStorage.getItem("profileData");
        if (savedData) {
          try {
            const parsedData = JSON.parse(savedData);
            Object.assign(profileData, parsedData);

            // Проверяем, есть ли изображения в сохраненных данных
            if (!parsedData.avatar)
              profileData.avatar = "https://i.postimg.cc/PrSF0zmq/image.jpg";
            if (!parsedData.banner)
              profileData.banner = "https://i.postimg.cc/kXsyBJ4Y/image.jpg";
          } catch (e) {
            console.error("Ошибка при чтении данных профиля:", e);
          }
        }

        firstNameInput.value = profileData.firstName;
        lastNameInput.value = profileData.lastName;
        infoInput.value = profileData.info;
        phoneInput.value = profileData.phone;
        discordInput.value = profileData.discord;
        emailInput.value = profileData.email;

        updateProfileDisplay();
      }

      // Обновление отображения профиля
      function updateProfileDisplay() {
        profileName.textContent = `${profileData.firstName} ${profileData.lastName}`;
        profileInfo.textContent = profileData.info;

        // Обновляем все иконки профиля
        if (profileData.avatar) {
          profileIcon.src = profileData.avatar;
          if (headerProfileIcon) headerProfileIcon.src = profileData.avatar;
          avatarPreview.src = profileData.avatar;
        }

        // Обновляем шапку профиля
        if (profileData.banner) {
          bannerPreview.src = profileData.banner;
        }
      }

      // Сохранение данных профиля
      function saveProfile() {
        profileData.firstName = firstNameInput.value;
        profileData.lastName = lastNameInput.value;
        profileData.info = infoInput.value;
        profileData.phone = phoneInput.value;
        profileData.discord = discordInput.value;
        profileData.email = emailInput.value;

        // Сохраняем данные в localStorage
        try {
          localStorage.setItem("profileData", JSON.stringify(profileData));
          updateProfileDisplay();
          alert("Изменения сохранены!");
        } catch (e) {
          console.error("Ошибка при сохранении данных:", e);
          alert("Произошла ошибка при сохранении данных");
        }
      }

      // Открытие модального окна для аватарки
      changeAvatarBtn.addEventListener("click", () => {
        avatarModal.style.display = "flex";
      });

      // Открытие модального окна для шапки
      changeBannerBtn.addEventListener("click", () => {
        bannerModal.style.display = "flex";
      });

      // Закрытие модальных окон
      closeButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          avatarModal.style.display = "none";
          bannerModal.style.display = "none";
        });
      });

      // Сохранение аватарки
      saveAvatarBtn.addEventListener("click", () => {
        const file = avatarInput.files[0];
        if (file) {
          // Проверяем размер файла (не более 2MB)
          if (file.size > 2 * 1024 * 1024) {
            alert("Размер файла не должен превышать 2MB");
            return;
          }

          const reader = new FileReader();
          reader.onload = (e) => {
            profileData.avatar = e.target.result;
            updateProfileDisplay();
            avatarModal.style.display = "none";

            // Сохраняем изменения
            localStorage.setItem("profileData", JSON.stringify(profileData));
          };
          reader.onerror = () => {
            alert("Ошибка при чтении файла");
          };
          reader.readAsDataURL(file);
        } else {
          alert("Пожалуйста, выберите файл");
        }
      });

      // Сохранение шапки профиля
      saveBannerBtn.addEventListener("click", () => {
        const file = bannerInput.files[0];
        if (file) {
          // Проверяем размер файла (не более 5MB)
          if (file.size > 5 * 1024 * 1024) {
            alert("Размер файла не должен превышать 5MB");
            return;
          }

          const reader = new FileReader();
          reader.onload = (e) => {
            profileData.banner = e.target.result;
            updateProfileDisplay();
            bannerModal.style.display = "none";

            // Сохраняем изменения
            localStorage.setItem("profileData", JSON.stringify(profileData));
          };
          reader.onerror = () => {
            alert("Ошибка при чтении файла");
          };
          reader.readAsDataURL(file);
        } else {
          alert("Пожалуйста, выберите файл");
        }
      });

      // Сохранение профиля
      saveProfileBtn.addEventListener("click", saveProfile);

      // Инициализация при загрузке страницы
      document.addEventListener("DOMContentLoaded", initFields);
    </script>
  </body>
</html>
